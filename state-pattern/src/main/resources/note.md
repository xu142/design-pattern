# 状态模式
## 1 定义
> 当一个对象内在状态改变时允许其改变行为，这个对象看起来像改变了其他类。
> 
> 状态模式的核心是封装，状态的变更引起了行为的变更，从外部看起来就好像这个对象对应的类发生了改变一样。
### 1.1 角色
#### 1.1.1 State 抽象状态角色
> 接口或抽象类，负责对象状态定义，并且封装环境角色以实现状态切换
#### 1.1.2 ConcreteState 具体状态角色
> 每一个具体状态必须完成两个职责：本状态的行为管理以及趋向状态管理，通俗的说，就是本状态下要做的事情，以及本状态如何过渡到其他状态
#### 1.1.3 Context 环境角色
> 定义客户端需要的接口，并且负责具体状态的切换。
> 
> 环境角色有两个不成文的约束：
> > 1.把状态对象声明为静态常量，有几个状态对象就声明几个静态常量
> > 2.环境角色具有状态抽象角色定义的所有行为，具体执行使用委托方式
## 2 应用
### 2.1 优点
#### 2.1.1 结构清晰
> 避免了过多的switch...case 或者if...else语句的使用，避免了程序的复杂性，提高系统的可维护性
#### 2.1.2 遵循设计原则
> 很好地体现了开闭原则和单一职责原则，每个状态都是一个子类，你要增加状态就要增加子类，你要修改状态，只修改一个子类就可以了。
#### 2.1.3 封装性非常好
> 这也是状态模式的基本要求，状态变换放置到类的内部来实现，外部的调用不用知道类内部如何实现状态和行为的变换。
### 2.2 缺点
> 子类太多，也就是类膨胀。
> 如果一个事物有很多个状态完全使用状态模式就会有太多的子类，不好管理。可以在数据库中建立一个状态表，然后根据状态执行相应的操作。
### 2.3 使用场景
#### 2.3.1 行为随状态改变而改变的场景
> 如权限设计，人员的状态不同即使执行相同的行为结果也会不同。
#### 2.3.2 条件分支判断语句的替代者
### 2.4 注意事项
> 状态模式适用于当某个对象在他的状态发生改变时，它的行为也随着发生比较大的变化，也就是说在行为受状态约束的情况下可以使用状态模式，而且使用时对象的状态最好
> 不要超过5个